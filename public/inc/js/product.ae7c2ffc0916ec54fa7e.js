!function(e){function t(n){if(o[n])return o[n].exports;var c=o[n]={i:n,l:!1,exports:{}};return e[n].call(c.exports,c,c.exports,t),c.l=!0,c.exports}var o={};t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/inc/",t(t.s="q7wr")}({S7Ff:function(e,t){document.app.Product={lastAdded:null,lastRemoved:null,addToStockEvent:function(){var e=document.querySelector("#addproduct"),t=document.querySelector("#removeproduct"),o=document.querySelector("#nbproductfield");e&&document.app.Util.addListener(e,"click",function(){var e=document.querySelector("#nbproduct");o.value=parseInt(o.value)+1,e.innerHTML=o.value}),t&&document.app.Util.addListener(t,"click",function(){var e=document.querySelector("#nbproduct");o.value>1&&(o.value=o.value-1,e.innerHTML=o.value)})},addToStock:function(e){document.querySelector("#expire").value="",document.querySelector("#nbproduct").innerHTML=1,document.querySelector("#nbproductfield").value=1,document.app.Product.lastAdded=e,document.app.toastResult=M.toast({html:e.nbproductfield+" x "+e.name+'<button class="btn-flat toast-action" onclick="document.app.Util.doAjax(document.app.url.cancelAddToStock,document.app.Product.lastAdded,document.app.Product.cancelAddToStock);">CANCEL</button>',displayLength:7e3,classes:"green"})},cancelAddToStock:function(e){document.app.toastResult=M.toast({html:e.nbproductfield+" x "+e.name+" <br> has been canceled",displayLength:7e3,classes:"orange accent-2"})},removeFromStock:function(e){document.app.Product.lastRemoved=e,document.app.toastResult=M.toast({html:"removed "+e.name+'<button class="btn-flat toast-action" onclick="document.app.Util.doAjax(document.app.url.cancelRemoveFromStock,document.app.Product.lastRemoved ,document.app.Product.cancelRemoveFormStock,\'POST\');">CANCEL</button>',displayLength:7e3,classes:"green",completeCallback:function(){document.app.Product.cancelCurrent.remove()}})},cancelRemoveFormStock:function(e){console.log("cancelRemoveFormStock"),console.log(e),document.app.Product.cancelCurrent.cancel(e),document.app.toastResult=M.toast({html:"Removed "+e.name+" <br> has been canceled",displayLength:7e3,classes:"orange accent-2"})},cancelCurrent:{obj:null,nbProduct:null,expires:null,selectExpire:null,set:function(e,t,o,n){this.obj=e,this.nbProduct=t,this.expires=o.reverse(),this.selectExpire=n},cancel:function(e){if(i=0,this.obj.innerHTML=this.nbProduct,this.selectExpire)for(expire in this.expires)this.selectExpire.insertAdjacentHTML("afterbegin",'<option value="'+e.ids[i]+'">'+this.expires[expire]+"</option>"),i++;document.app.Product.list.init(),this.obj=null,this.nbProduct=null,this.expires=null},remove:function(){this.obj&&parseInt(this.obj.innerHTML)<=0&&this.obj.parentNode.parentNode.parentNode.parentNode.removeChild(this.obj.parentNode.parentNode.parentNode)}},removeProduct:function(e){document.app.Util.preventPropagation(e);var t=this.parentNode.parentNode.querySelector(".nbProduct"),o=parseInt(t.innerHTML),n=this.parentNode.parentNode.querySelector(".select-dropdown"),c=this.parentNode.parentNode.querySelector("select"),r=n.value.split(", ").filter(function(e){return""!==e}),l=[];if(console.log(this.parentNode.parentNode.querySelector("h4 .nbProduct").innerHTML+this.parentNode.parentNode.querySelector("h4 .name").innerHTML),o>0&&r.length>0){if(c){for(date in r){select=c.querySelectorAll("option");for(option in select)if(select[option].text===r[date]){l.push(select[option].value),c.remove(select[option].index);break}}c.querySelector("option").selected=!0}document.app.Product.cancelCurrent.set(t,o,r,c),t.innerHTML=parseInt(o)+-1*r.length,document.app.Product.list.init(),document.app.Util.doAjax(document.app.url.removeFromStock,{ids:l,name:this.parentNode.parentNode.querySelector("h4 .nbProduct").innerHTML+this.parentNode.parentNode.querySelector("h4 .name").innerHTML},document.app.Product.removeFromStock)}},list:{init:function(){this.initEvents()},initEvents:function(){document.app.Util.addListenerAll(document.querySelectorAll(".collapsible .actionbtn .btn-floating"),"click",document.app.Util.preventPropagation),document.app.Util.addListenerAll(document.querySelectorAll(".collapsible .actionbtn .btn-floating.btnRemove"),"click",document.app.Product.removeProduct),this.initSelects()},initSelects:function(){M.FormSelect.init(document.querySelectorAll("select")),document.app.Util.addListenerAll(document.querySelectorAll(".select-dropdown"),"click",document.app.Util.preventPropagation);var e=document.querySelectorAll(".dropdown-content LI.disabled");document.app.Util.addListenerAll(e,"click",this.closeSelect)},closeSelect:function(e){document.app.Product.list.init()}}},document.app.Product.list.init(),document.app.Product.addToStockEvent()},q7wr:function(e,t,o){o("S7Ff")}});